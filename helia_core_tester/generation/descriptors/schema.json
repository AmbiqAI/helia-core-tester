{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "operator": {
      "type": "string",
      "enum": ["FullyConnected", "Conv2D", "DepthwiseConv2D", "MatMul", "Elementwise", "Add", "Sub", "Mul", "Maximum", "Minimum", "Relu", "Relu6", "LeakyRelu", "Softmax", "Tanh", "Logistic", "HardSwish", "PReLU", "Quantize", "Dequantize", "Pooling", "Transpose", "StridedSlice", "Pad", "LSTM", "SVDF", "Mean", "ReduceMax", "ReduceMin", "ArgMax", "ArgMin", "TransposeConv", "Equal", "NotEqual", "Greater", "GreaterEqual", "Less", "LessEqual", "Fill", "ZerosLike", "Reshape", "Shape", "Slice", "Squeeze", "SpaceToDepth", "DepthToSpace", "Split", "Pack", "Unpack", "Concatenation", "SpaceToBatchND", "BatchToSpaceND", "VariableUpdate"]
    },
    "name": {
      "type": "string",
      "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
    },
    "input_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 2,
      "maxItems": 4
    },
    "filter_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 2,
      "maxItems": 4
    },
    "input_1_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 2,
      "maxItems": 4
    },
    "input_2_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 2,
      "maxItems": 4
    },
    "activation": {
      "type": "string",
      "enum": ["NONE", "RELU", "RELU6", "TANH", "SIGMOID"]
    },
    "activation_dtype": {
      "type": "string",
      "enum": ["S8", "S16"]
    },
    "weight_dtype": {
      "type": "string",
      "enum": ["S8", "S4"]
    },
    "use_bias": {
      "type": "boolean"
    },
    "adj_x": {
      "type": "boolean"
    },
    "adj_y": {
      "type": "boolean"
    },
    "pooling_type": {
      "type": "string",
      "enum": ["AVERAGE", "MAX"]
    },
    "pool_size": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 2,
      "maxItems": 2
    },
    "strides": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 2,
      "maxItems": 2
    },
    "padding": {
      "type": "string",
      "enum": ["valid", "same", "VALID", "SAME"]
    },
    "axes": {
      "type": "array",
      "items": {"type": "integer", "minimum": 0},
      "minItems": 1
    },
    "axis": {
      "type": "integer",
      "minimum": 0
    },
    "keepdims": {
      "type": "boolean"
    },
    "output_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 1
    },
    "value": {
      "type": "number"
    },
    "target_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 1
    },
    "begin": {
      "type": "array",
      "items": {"type": "integer"},
      "minItems": 1
    },
    "end": {
      "type": "array",
      "items": {"type": "integer"},
      "minItems": 1
    },
    "shrink_axis_mask": {
      "type": "integer",
      "minimum": 0
    },
    "size": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 1
    },
    "block_size": {
      "type": "integer",
      "minimum": 2
    },
    "block_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 1
    },
    "paddings": {
      "type": "array",
      "items": {
        "type": "array",
        "items": {"type": "integer", "minimum": 0},
        "minItems": 2,
        "maxItems": 2
      }
    },
    "crops": {
      "type": "array",
      "items": {
        "type": "array",
        "items": {"type": "integer", "minimum": 0},
        "minItems": 2,
        "maxItems": 2
      }
    },
    "num_splits": {
      "type": "integer",
      "minimum": 2
    },
    "size_splits": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 1
    },
    "num_tensors": {
      "type": "integer",
      "minimum": 2
    },
    "value_shape": {
      "type": "array",
      "items": {"type": "integer", "minimum": 1},
      "minItems": 1
    },
    "hint": {
      "type": "object",
      "properties": {
        "kernel": {
          "type": "string"
        },
        "call_style": {
          "type": "string",
          "enum": ["per_channel", "per_tensor"]
        },
        "transpose_weights": {
          "type": "boolean"
        },
        "extras": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  },
  "required": ["operator", "name", "activation_dtype", "weight_dtype"],
  "additionalProperties": false,
  "allOf": [
    {
      "if": {
        "properties": {"operator": {"const": "FullyConnected"}}
      },
      "then": {
        "required": ["input_shape", "filter_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Conv2D"}}
      },
      "then": {
        "required": ["input_shape", "filter_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "DepthwiseConv2D"}}
      },
      "then": {
        "required": ["input_shape", "filter_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "MatMul"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Elementwise"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Add"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Sub"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Mul"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Maximum"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Minimum"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Relu"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Relu6"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "LeakyRelu"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Softmax"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Quantize"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Dequantize"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Pooling"}}
      },
      "then": {
        "required": ["input_shape", "pooling_type", "pool_size"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Transpose"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "StridedSlice"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Pad"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "LSTM"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "SVDF"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Tanh"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Logistic"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "HardSwish"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "PReLU"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Equal"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "NotEqual"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Greater"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "GreaterEqual"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Less"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "LessEqual"}}
      },
      "then": {
        "required": ["input_1_shape", "input_2_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Mean"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "ReduceMax"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "ReduceMin"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "ArgMax"}}
      },
      "then": {
        "required": ["input_shape", "axis"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "ArgMin"}}
      },
      "then": {
        "required": ["input_shape", "axis"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Fill"}}
      },
      "then": {
        "required": ["output_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "ZerosLike"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Reshape"}}
      },
      "then": {
        "required": ["input_shape", "target_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Shape"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Slice"}}
      },
      "then": {
        "required": ["input_shape", "begin", "size"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Squeeze"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "SpaceToDepth"}}
      },
      "then": {
        "required": ["input_shape", "block_size"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "DepthToSpace"}}
      },
      "then": {
        "required": ["input_shape", "block_size"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Split"}}
      },
      "then": {
        "required": ["input_shape"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Pack"}}
      },
      "then": {
        "required": ["num_tensors"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Unpack"}}
      },
      "then": {
        "required": ["input_shape", "axis", "num_tensors"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "Concatenation"}}
      },
      "then": {
        "required": ["axis"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "SpaceToBatchND"}}
      },
      "then": {
        "required": ["input_shape", "block_shape", "paddings"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "BatchToSpaceND"}}
      },
      "then": {
        "required": ["input_shape", "block_shape", "crops"]
      }
    },
    {
      "if": {
        "properties": {"operator": {"const": "VariableUpdate"}}
      },
      "then": {
        "required": []
      }
    }
  ]
}
